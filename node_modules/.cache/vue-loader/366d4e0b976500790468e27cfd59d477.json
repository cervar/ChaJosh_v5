{"remainingRequest":"C:\\Users\\Dino\\Desktop\\todolist-vuejs-9\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Dino\\Desktop\\todolist-vuejs-9\\src\\views\\List.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Dino\\Desktop\\todolist-vuejs-9\\src\\views\\List.vue","mtime":1661170852022},{"path":"C:\\Users\\Dino\\Desktop\\todolist-vuejs-9\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661165481323},{"path":"C:\\Users\\Dino\\Desktop\\todolist-vuejs-9\\node_modules\\babel-loader\\lib\\index.js","mtime":1661165482909},{"path":"C:\\Users\\Dino\\Desktop\\todolist-vuejs-9\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661165481323},{"path":"C:\\Users\\Dino\\Desktop\\todolist-vuejs-9\\node_modules\\vue-loader\\lib\\index.js","mtime":1661165484262}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBUYXNrc01vZGVsIGZyb20gIkAvbW9kZWxzL1Rhc2tzTW9kZWwiOwppbXBvcnQgU3RhdHVzIGZyb20gIkAvdmFsdWVPYmplY3RzL3N0YXR1cyI7CmltcG9ydCBUb2FzdE1peGluIGZyb20gIkAvbWl4aW5zL3RvYXN0TWl4aW4uanMiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJMaXN0IiwKCiAgbWl4aW5zOiBbVG9hc3RNaXhpbl0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0YXNrczogW10sCiAgICAgIHRhc2tTZWxlY3RlZDogW10sCiAgICAgIHN0YXR1czogU3RhdHVzLAogICAgICBmaWx0ZXI6IHsKICAgICAgICBzdWJqZWN0OiBudWxsLAogICAgICAgIHN0YXR1czogbnVsbCwKICAgICAgfSwKICAgICAgb3B0aW9uc0xpc3Q6IFsKICAgICAgICB7IHZhbHVlOiBudWxsLCB0ZXh0OiAic3ZlIiB9LAogICAgICAgIHsgdmFsdWU6IFN0YXR1cy5PUEVOLCB0ZXh0OiAidSByYWR1IiB9LAogICAgICAgIHsgdmFsdWU6IFN0YXR1cy5GSU5JU0hFRCwgdGV4dDogInphdnLFoWVubyIgfSwKICAgICAgICB7IHZhbHVlOiBTdGF0dXMuQVJDSElWRUQsIHRleHQ6ICJhcmhpdmlyYW5vIiB9LAogICAgICBdLAogICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICBzdGF0dXNMaXN0OiBbU3RhdHVzLk9QRU4sIFN0YXR1cy5GSU5JU0hFRF0sCiAgICB9OwogIH0sCgogIGFzeW5jIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnRhc2tzID0gYXdhaXQgdGhpcy5nZXRUYXNrcygpOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIGVkaXQodGFza0lkKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogImZvcm0iLCBwYXJhbXM6IHsgdGFza0lkIH0gfSk7CiAgICB9LAoKICAgIGFzeW5jIHJlbW92ZSh0YXNrSWQpIHsKICAgICAgdGhpcy50YXNrU2VsZWN0ZWQgPSBhd2FpdCBUYXNrc01vZGVsLmZpbmQodGFza0lkKTsKICAgICAgdGhpcy4kcmVmcy5tb2RhbFJlbW92ZS5zaG93KCk7CiAgICB9LAoKICAgIGhpZGVNb2RhbCgpIHsKICAgICAgdGhpcy4kcmVmcy5tb2RhbFJlbW92ZS5oaWRlKCk7CiAgICB9LAoKICAgIGFzeW5jIGNvbmZpcm1SZW1vdmVUYXNrKCkgewogICAgICB0aGlzLnRhc2tTZWxlY3RlZC5kZWxldGUoKTsKICAgICAgdGhpcy50YXNrcyA9IGF3YWl0IHRoaXMuZ2V0VGFza3MoKTsKICAgICAgdGhpcy5oaWRlTW9kYWwoKTsKICAgIH0sCgogICAgYXN5bmMgdXBkYXRlU3RhdHVzKHRhc2tJZCwgc3RhdHVzKSB7CiAgICAgIGxldCB0YXNrID0gYXdhaXQgVGFza3NNb2RlbC5maW5kKHRhc2tJZCk7CiAgICAgIHRhc2suc3RhdHVzID0gc3RhdHVzOwogICAgICBhd2FpdCB0YXNrLnNhdmUoKTsKCiAgICAgIHRoaXMudGFza3MgPSBhd2FpdCB0aGlzLmdldFRhc2tzKCk7CiAgICAgIHRoaXMuc2hvd1RvYXN0KAogICAgICAgICJ1c3BqZWgiLAogICAgICAgICAiU3RhdHVzIHphZGF0a2EgamUgdXNwamXFoW5vIGHFvnVyaXJhbiIKICAgICAgKTsKICAgIH0sCgogICAgaXNGaW5pc2hlZCh0YXNrKSB7CiAgICAgIHJldHVybiB0YXNrLnN0YXR1cyA9PT0gdGhpcy5zdGF0dXMuRklOSVNIRUQ7CiAgICB9LAoKICAgIGFzeW5jIGZpbHRlclRhc2tzKCkgewogICAgICBsZXQgZmlsdGVyID0geyAuLi50aGlzLmZpbHRlciB9OwogICAgICBmaWx0ZXIgPSB0aGlzLmNsZWFuKGZpbHRlcik7CiAgICAgIGZpbHRlci51c2VySWQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJhdXRoVXNlciIpKS5pZDsKICAgICAgdGhpcy50YXNrcyA9IGF3YWl0IFRhc2tzTW9kZWwucGFyYW1zKGZpbHRlcikuZ2V0KCk7CiAgICB9LAoKICAgIGNsZWFuKG9iaikgewogICAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBvYmopIHsKICAgICAgICBpZiAob2JqW3Byb3BOYW1lXSA9PT0gbnVsbCB8fCBvYmpbcHJvcE5hbWVdID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGRlbGV0ZSBvYmpbcHJvcE5hbWVdOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gb2JqOwogICAgfSwKCiAgICBhc3luYyBjbGVhckZpbHRlcigpIHsKICAgICAgdGhpcy5maWx0ZXIgPSB7CiAgICAgICAgc3ViamVjdDogbnVsbCwKICAgICAgICBzdGF0dXM6IG51bGwsCiAgICAgIH07CiAgICAgIHRoaXMudGFza3MgPSBhd2FpdCB0aGlzLmdldFRhc2tzKCk7CiAgICB9LAoKICAgIG92ZXJkdWVQcmVzZW50ZXIoZGF0ZU92ZXJkdWUpIHsKICAgICAgaWYgKCFkYXRlT3ZlcmR1ZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZXR1cm4gZGF0ZU92ZXJkdWUuc3BsaXQoIi0iKS5yZXZlcnNlKCkuam9pbigiLyIpOwogICAgfSwKCiAgICB2YXJpYW50T3ZlcmR1ZShkYXRlT3ZlcmR1ZSwgdGFza1N0YXR1cykgewogICAgICBpZiAoIWRhdGVPdmVyZHVlKSB7CiAgICAgICAgcmV0dXJuICJsaWdodCI7CiAgICAgIH0KCiAgICAgIGlmICh0YXNrU3RhdHVzID09PSB0aGlzLnN0YXR1cy5GSU5JU0hFRCkgewogICAgICAgIHJldHVybiAic3VjY2VzcyI7CiAgICAgIH0KCiAgICAgIGxldCBkYXRlTm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCJUIilbMF07CiAgICAgIGlmIChkYXRlT3ZlcmR1ZSA9PT0gZGF0ZU5vdykgewogICAgICAgIHJldHVybiAid2FybmluZyI7CiAgICAgIH0KCiAgICAgIGlmIChkYXRlT3ZlcmR1ZSA8IGRhdGVOb3cpIHsKICAgICAgICByZXR1cm4gImRhbmdlciI7CiAgICAgIH0KCiAgICAgIHJldHVybiAibGlnaHQiOwogICAgfSwKCiAgICBhc3luYyBnZXRUYXNrcygpIHsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwogICAgICBsZXQgc2VsZiA9IHRoaXM7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHNlbGYuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgIH0sIDMwMDApOwogICAgICByZXR1cm4gYXdhaXQgVGFza3NNb2RlbC5wYXJhbXMoewogICAgICAgIHVzZXJJZDogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYXV0aFVzZXIiKSkuaWQsCiAgICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1c0xpc3QsCiAgICAgIH0pLmdldCgpOwogICAgfSwKICB9LAoKICBjb21wdXRlZDogewogICAgaXNUYXNrc0VtcHR5KCkgewogICAgICByZXR1cm4gdGhpcy50YXNrcy5sZW5ndGggPT09IDA7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["List.vue"],"names":[],"mappings":";AA8HA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"List.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"container mt-2\">\n    <b-form inline class=\"mb-2\">\n      <b-form-input\n        v-model=\"filter.subject\"\n        id=\"subject\"\n        placeholder=\"upiši obvezu\"\n        class=\"mr-2\"\n        autocomplete=\"off\"\n      ></b-form-input>\n\n      <b-form-select\n        v-model=\"filter.status\"\n        :options=\"optionsList\"\n        class=\"mr-2\"\n      ></b-form-select>\n\n      <b-button\n        variant=\"outline-secondary\"\n        @click=\"filterTasks\"\n        class=\"mr-2\"\n        v-b-tooltip.hover\n        title=\"Traži\"\n        ><i class=\"fas fa-search\"></i\n      ></b-button>\n\n      <b-button\n        variant=\"outline-secondary\"\n        @click=\"clearFilter\"\n        class=\"mr-2\"\n        v-b-tooltip.hover\n        title=\"očisti filter\"\n        ><i class=\"fas fa-times\"></i\n      ></b-button>\n    </b-form>\n\n    <template v-if=\"isLoading\">\n      <div class=\"loading-spin\">\n        <b-spinner style=\"width: 5rem; height: 5rem\"></b-spinner>\n      </div>\n    </template>\n    <template v-if=\"isTasksEmpty && !isLoading\">\n      <div class=\"empty-data mt-2\">\n        <img src=\"../assets/images/empty-data.svg\" class=\"empty-data-image\" />\n        <b-button variant=\"outline-primary\" class=\"mt-2\" size=\"lg\" to=\"/form\">\n          stvori zadatak\n        </b-button>\n      </div>\n    </template>\n    <template v-if=\"!isTasksEmpty && !isLoading\">\n      <div v-for=\"task in tasks\" :key=\"task.id\">\n        <b-card class=\"mb-2\" :class=\"{ 'finished-task': isFinished(task) }\">\n          <div class=\"d-flex justify-content-between\">\n            <b-card-title>{{ task.subject }}</b-card-title>\n\n            <span>\n              <b-badge\n                :variant=\"variantOverdue(task.dateOverdue, task.status)\"\n                >{{ overduePresenter(task.dateOverdue) }}</b-badge\n              >\n            </span>\n          </div>\n\n          <b-card-text>{{ task.description }}</b-card-text>\n\n          <b-button\n            variant=\"outline-secondary\"\n            class=\"mr-2\"\n            @click=\"updateStatus(task.id, status.FINISHED)\"\n            v-b-tooltip.hover\n            title=\"završi\"\n          >\n            <i class=\"fas fa-check\"></i>\n          </b-button>\n          <b-button\n            variant=\"outline-secondary\"\n            class=\"mr-2\"\n            @click=\"updateStatus(task.id, status.ARCHIVED)\"\n            v-b-tooltip.hover\n            title=\"arhiviraj\"\n          >\n            <i class=\"fas fa-archive\"></i>\n          </b-button>\n          <b-button\n            variant=\"outline-secondary\"\n            class=\"mr-2\"\n            @click=\"edit(task.id)\"\n            v-b-tooltip.hover\n            title=\"uredi\"\n          >\n            <i class=\"fas fa-edit\"></i>\n          </b-button>\n          <b-button\n            variant=\"outline-danger\"\n            class=\"mr-2\"\n            @click=\"remove(task.id)\"\n            v-b-tooltip.hover\n            title=\"izbriši\"\n          >\n            <i class=\"fas fa-times\"></i>\n          </b-button>\n        </b-card>\n      </div>\n    </template>\n\n    <b-modal ref=\"modalRemove\" hide-footer title=\"brisanje zadataka\">\n      <div class=\"d-block text-center\">\n        želite izbrisati zadatak? {{ taskSelected.subject }}\n      </div>\n      <div class=\"mt-3 d-flex justify-content-end\">\n        <b-button variant=\"outline-secondary\" class=\"mr-2\" @click=\"hideModal\">\n          odustani\n        </b-button>\n        <b-button\n          variant=\"outline-danger\"\n          class=\"mr-2\"\n          @click=\"confirmRemoveTask\"\n        >\n          IZBRIŠI\n        </b-button>\n      </div>\n    </b-modal>\n  </div>\n</template>\n\n<script>\nimport TasksModel from \"@/models/TasksModel\";\nimport Status from \"@/valueObjects/status\";\nimport ToastMixin from \"@/mixins/toastMixin.js\";\n\nexport default {\n  name: \"List\",\n\n  mixins: [ToastMixin],\n\n  data() {\n    return {\n      tasks: [],\n      taskSelected: [],\n      status: Status,\n      filter: {\n        subject: null,\n        status: null,\n      },\n      optionsList: [\n        { value: null, text: \"sve\" },\n        { value: Status.OPEN, text: \"u radu\" },\n        { value: Status.FINISHED, text: \"završeno\" },\n        { value: Status.ARCHIVED, text: \"arhivirano\" },\n      ],\n      isLoading: false,\n      statusList: [Status.OPEN, Status.FINISHED],\n    };\n  },\n\n  async created() {\n    this.tasks = await this.getTasks();\n  },\n\n  methods: {\n    edit(taskId) {\n      this.$router.push({ name: \"form\", params: { taskId } });\n    },\n\n    async remove(taskId) {\n      this.taskSelected = await TasksModel.find(taskId);\n      this.$refs.modalRemove.show();\n    },\n\n    hideModal() {\n      this.$refs.modalRemove.hide();\n    },\n\n    async confirmRemoveTask() {\n      this.taskSelected.delete();\n      this.tasks = await this.getTasks();\n      this.hideModal();\n    },\n\n    async updateStatus(taskId, status) {\n      let task = await TasksModel.find(taskId);\n      task.status = status;\n      await task.save();\n\n      this.tasks = await this.getTasks();\n      this.showToast(\n        \"uspjeh\",\n         \"Status zadatka je uspješno ažuriran\"\n      );\n    },\n\n    isFinished(task) {\n      return task.status === this.status.FINISHED;\n    },\n\n    async filterTasks() {\n      let filter = { ...this.filter };\n      filter = this.clean(filter);\n      filter.userId = JSON.parse(localStorage.getItem(\"authUser\")).id;\n      this.tasks = await TasksModel.params(filter).get();\n    },\n\n    clean(obj) {\n      for (var propName in obj) {\n        if (obj[propName] === null || obj[propName] === undefined) {\n          delete obj[propName];\n        }\n      }\n      return obj;\n    },\n\n    async clearFilter() {\n      this.filter = {\n        subject: null,\n        status: null,\n      };\n      this.tasks = await this.getTasks();\n    },\n\n    overduePresenter(dateOverdue) {\n      if (!dateOverdue) {\n        return;\n      }\n      return dateOverdue.split(\"-\").reverse().join(\"/\");\n    },\n\n    variantOverdue(dateOverdue, taskStatus) {\n      if (!dateOverdue) {\n        return \"light\";\n      }\n\n      if (taskStatus === this.status.FINISHED) {\n        return \"success\";\n      }\n\n      let dateNow = new Date().toISOString().split(\"T\")[0];\n      if (dateOverdue === dateNow) {\n        return \"warning\";\n      }\n\n      if (dateOverdue < dateNow) {\n        return \"danger\";\n      }\n\n      return \"light\";\n    },\n\n    async getTasks() {\n      this.isLoading = true;\n      let self = this;\n      setTimeout(function () {\n        self.isLoading = false;\n      }, 3000);\n      return await TasksModel.params({\n        userId: JSON.parse(localStorage.getItem(\"authUser\")).id,\n        status: this.statusList,\n      }).get();\n    },\n  },\n\n  computed: {\n    isTasksEmpty() {\n      return this.tasks.length === 0;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.empty-data {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n}\n\n.empty-data-image {\n  width: 300px;\n  height: 300px;\n}\n\n.finished-task {\n  opacity: 0.7;\n}\n\n.finished-task > .card-body > h4,\n.finished-task > .card-body > p {\n  text-decoration: line-through;\n}\n\n.loading-spin {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 65vh;\n}\n</style>\n"]}]}