{"remainingRequest":"C:\\Users\\Dino\\Desktop\\todolist-vuejs-9\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Dino\\Desktop\\todolist-vuejs-9\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Dino\\Desktop\\todolist-vuejs-9\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Dino\\Desktop\\todolist-vuejs-9\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Dino\\Desktop\\todolist-vuejs-9\\src\\views\\Login.vue","mtime":1661167699146},{"path":"C:\\Users\\Dino\\Desktop\\todolist-vuejs-9\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661165481323},{"path":"C:\\Users\\Dino\\Desktop\\todolist-vuejs-9\\node_modules\\babel-loader\\lib\\index.js","mtime":1661165482909},{"path":"C:\\Users\\Dino\\Desktop\\todolist-vuejs-9\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661165481323},{"path":"C:\\Users\\Dino\\Desktop\\todolist-vuejs-9\\node_modules\\vue-loader\\lib\\index.js","mtime":1661165484262}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVxdWlyZWQsIG1pbkxlbmd0aCwgZW1haWwgfSBmcm9tICJ2dWVsaWRhdGUvbGliL3ZhbGlkYXRvcnMiOwppbXBvcnQgVXNlcnNNb2RlbCBmcm9tICJAL21vZGVscy9Vc2Vyc01vZGVsIjsKaW1wb3J0IFRvYXN0TWl4aW4gZnJvbSAiQC9taXhpbnMvdG9hc3RNaXhpbi5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBtaXhpbnM6IFtUb2FzdE1peGluXSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm06IHsKICAgICAgICBlbWFpbDogIiIsCiAgICAgICAgcGFzc3dvcmQ6ICIiCiAgICAgIH0KICAgIH07CiAgfSwKCiAgdmFsaWRhdGlvbnM6IHsKICAgIGZvcm06IHsKICAgICAgZW1haWw6IHsKICAgICAgICByZXF1aXJlZCwKICAgICAgICBlbWFpbAogICAgICB9LAogICAgICBwYXNzd29yZDogewogICAgICAgIHJlcXVpcmVkLAogICAgICAgIG1pbkxlbmd0aDogbWluTGVuZ3RoKDYpCiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGxvZ2luKCkgewogICAgICB0aGlzLiR2LiR0b3VjaCgpOwogICAgICBpZiAodGhpcy4kdi4kZXJyb3IpIHJldHVybjsKICAgICAgbGV0IHVzZXIgPSBhd2FpdCBVc2Vyc01vZGVsLnBhcmFtcyh7CiAgICAgICAgZW1haWw6IHRoaXMuZm9ybS5lbWFpbAogICAgICB9KS5nZXQoKTsKCiAgICAgIGlmICghdXNlciB8fCAhdXNlclswXSB8fCAhdXNlclswXS5lbWFpbCkgewogICAgICAgIHRoaXMuc2hvd1RvYXN0KCJncmXFoWthIiwgIkVycm8hIiwgImxvemlua2Ugc2UgbmUgcG91ZGFyYWp1Iik7CiAgICAgICAgdGhpcy5jbGVhckZvcm0oKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHVzZXIgPSB1c2VyWzBdOwoKICAgICAgaWYgKHVzZXIucGFzc3dvcmQgIT09IHRoaXMuZm9ybS5wYXNzd29yZCkgewogICAgICAgIHRoaXMuc2hvd1RvYXN0KCJncmXFoWthIiwgIkVycm8hIiwgImxvemlua2Ugc2UgbmUgcG91ZGFyYWp1Iik7CiAgICAgICAgdGhpcy5jbGVhckZvcm0oKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhdXRoVXNlcicsIEpTT04uc3RyaW5naWZ5KHVzZXIpKTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICJsaXN0IgogICAgICB9KTsKICAgIH0sCgogICAgY2xlYXJGb3JtKCkgewogICAgICB0aGlzLmZvcm0gPSB7CiAgICAgICAgZW1haWw6ICIiLAogICAgICAgIHBhc3N3b3JkOiAiIgogICAgICB9OwogICAgfSwKCiAgICBnZXRWYWxpZGF0aW9uKGZpZWxkKSB7CiAgICAgIGlmICh0aGlzLiR2LmZvcm0uJGRpcnR5ID09PSBmYWxzZSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CgogICAgICByZXR1cm4gIXRoaXMuJHYuZm9ybVtmaWVsZF0uJGVycm9yOwogICAgfSwKCiAgICBnb1RvUmVnaXN0ZXIoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAicmVnaXN0ZXIiCiAgICAgIH0pOwogICAgfQoKICB9Cn07"},{"version":3,"mappings":"AA8DA;AACA;AACA;AAEA;EACAA,oBADA;;EAGAC;IACA;MACAC;QACAC,SADA;QAEAC;MAFA;IADA;EAMA,CAVA;;EAYAC;IACAH;MACAC;QACAG,QADA;QAEAH;MAFA,CADA;MAMAC;QACAE,QADA;QAEAC;MAFA;IANA;EADA,CAZA;EA0BAC;IACA;MACA;MACA;MAEA;QAAAL;MAAA;;MAEA;QACA;QACA;QACA;MACA;;MAEAM;;MACA;QACA;QACA;QACA;MACA;;MAEAC;MACA;QAAAC;MAAA;IACA,CAtBA;;IAwBAC;MACA;QACAT,SADA;QAEAC;MAFA;IAIA,CA7BA;;IA+BAS;MACA;QACA;MACA;;MAEA;IACA,CArCA;;IAuCAC;MACA;QAAAH;MAAA;IACA;;EAzCA;AA1BA","names":["mixins","data","form","email","password","validations","required","minLength","methods","user","localStorage","name","clearForm","getValidation","goToRegister"],"sourceRoot":"src/views","sources":["Login.vue"],"sourcesContent":["<template>\n  <b-row class=\"vh-100 vw-100 row-login\">\n    <b-col sm=\"5\" class=\"d-flex justify-content-center align-items-center left-login\">\n\n      <div class=\"col-8\">\n        <h2 class=\"text-center mb-5 title-login\">prijavi se</h2>\n      <b-form>\n      <b-form-group\n        label=\"E-mail:\"\n        label-for=\"email\"\n      >\n        <b-form-input\n          id=\"email\"\n          type=\"email\"\n          placeholder=\"vaš email@email.com\"\n          autocomplete=\"off\"\n          v-model.trim=\"$v.form.email.$model\"\n          :state=\"getValidation('email')\"\n        ></b-form-input>\n      </b-form-group>\n\n      <b-form-group label-for=\"password\">\n        <label class=\"d-flex justify-content-between\">\n          Lozinka\n\n          <small><a href=\"#\">Zaboravili ste lozinku?</a></small>\n        </label>\n        <b-form-input\n          id=\"password\"\n          type=\"password\"\n          placeholder=\"Upišite vašu lozinku\"\n          v-model.trim=\"$v.form.password.$model\"\n          :state=\"getValidation('password')\"\n        ></b-form-input>\n      </b-form-group>\n\n      <b-button \n        type=\"button\" \n        variant=\"primary\"  \n        block\n        @click=\"login\"\n        ><i class=\"fas fa-sign-in-alt\"></i> ulaz</b-button>\n\n      <hr>\n\n      <b-button \n        type=\"button\" \n        variant=\"outline-secondary\"  \n        block\n        @click=\"goToRegister\"\n        ><i class=\"fas fa-user-plus\"></i> nemam račun</b-button>\n    </b-form>\n    </div>\n\n    </b-col>\n    <b-col sm=\"7\" class=\"side-login d-flex justify-content-center align-items-center\">\n      <img src=\"../assets/images/login.svg\" class=\"img-login\" />\n    </b-col>\n  </b-row>\n</template>\n\n<script>\nimport { required, minLength, email } from \"vuelidate/lib/validators\";\nimport UsersModel from \"@/models/UsersModel\";\nimport ToastMixin from \"@/mixins/toastMixin.js\";\n\nexport default {\n  mixins: [ToastMixin],\n\n  data() {\n    return {\n      form: {\n        email: \"\",\n        password: \"\"\n      }\n    }\n  },\n\n  validations: {\n    form: {\n      email: {\n        required, \n        email\n      },\n\n      password: {\n        required,\n        minLength: minLength(6),\n      },\n    },\n  },\n\n  methods: {\n    async login() {\n      this.$v.$touch();\n      if (this.$v.$error) return;\n\n      let user = await UsersModel.params({email: this.form.email}).get();\n\n      if(!user || !user[0] || !user[0].email) {\n        this.showToast(\"greška\", \"Erro!\", \"lozinke se ne poudaraju\");\n        this.clearForm();\n        return;\n      }\n\n      user = user[0];\n      if(user.password !== this.form.password) {\n        this.showToast(\"greška\", \"Erro!\", \"lozinke se ne poudaraju\");\n        this.clearForm();\n        return;\n      }\n\n      localStorage.setItem('authUser', JSON.stringify(user));\n      this.$router.push({name: \"list\"});\n    },\n\n    clearForm() {\n      this.form = {\n        email: \"\",\n        password: \"\"\n      }\n    },\n\n    getValidation(field) {\n      if (this.$v.form.$dirty === false) {\n        return null;\n      }\n\n      return !this.$v.form[field].$error;\n    },\n\n    goToRegister() {\n      this.$router.push({ name: \"register\" });\n    }\n  },\n}\n</script>\n\n<style>\n*, \n*:after,\n*:before {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    text-decoration: none;\n}\n\n.row-login {\n  margin-left: 0 !important;\n}\n\n.img-login {\n  width: 600px;\n  height: 600px;\n}\n\n.left-login {\n  background-color: #f2f2f2;\n}\n\n.title-login {\n  font-weight: bold;\n}\n</style>\n"]}]}