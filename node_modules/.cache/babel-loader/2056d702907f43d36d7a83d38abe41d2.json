{"remainingRequest":"C:\\Users\\Dino\\Desktop\\todolist-vuejs-9\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Dino\\Desktop\\todolist-vuejs-9\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Dino\\Desktop\\todolist-vuejs-9\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Dino\\Desktop\\todolist-vuejs-9\\src\\views\\List.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Dino\\Desktop\\todolist-vuejs-9\\src\\views\\List.vue","mtime":1661170852022},{"path":"C:\\Users\\Dino\\Desktop\\todolist-vuejs-9\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661165481323},{"path":"C:\\Users\\Dino\\Desktop\\todolist-vuejs-9\\node_modules\\babel-loader\\lib\\index.js","mtime":1661165482909},{"path":"C:\\Users\\Dino\\Desktop\\todolist-vuejs-9\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661165481323},{"path":"C:\\Users\\Dino\\Desktop\\todolist-vuejs-9\\node_modules\\vue-loader\\lib\\index.js","mtime":1661165484262}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFRhc2tzTW9kZWwgZnJvbSAiQC9tb2RlbHMvVGFza3NNb2RlbCI7CmltcG9ydCBTdGF0dXMgZnJvbSAiQC92YWx1ZU9iamVjdHMvc3RhdHVzIjsKaW1wb3J0IFRvYXN0TWl4aW4gZnJvbSAiQC9taXhpbnMvdG9hc3RNaXhpbi5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTGlzdCIsCiAgbWl4aW5zOiBbVG9hc3RNaXhpbl0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0YXNrczogW10sCiAgICAgIHRhc2tTZWxlY3RlZDogW10sCiAgICAgIHN0YXR1czogU3RhdHVzLAogICAgICBmaWx0ZXI6IHsKICAgICAgICBzdWJqZWN0OiBudWxsLAogICAgICAgIHN0YXR1czogbnVsbAogICAgICB9LAogICAgICBvcHRpb25zTGlzdDogW3sKICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICB0ZXh0OiAic3ZlIgogICAgICB9LCB7CiAgICAgICAgdmFsdWU6IFN0YXR1cy5PUEVOLAogICAgICAgIHRleHQ6ICJ1IHJhZHUiCiAgICAgIH0sIHsKICAgICAgICB2YWx1ZTogU3RhdHVzLkZJTklTSEVELAogICAgICAgIHRleHQ6ICJ6YXZyxaFlbm8iCiAgICAgIH0sIHsKICAgICAgICB2YWx1ZTogU3RhdHVzLkFSQ0hJVkVELAogICAgICAgIHRleHQ6ICJhcmhpdmlyYW5vIgogICAgICB9XSwKICAgICAgaXNMb2FkaW5nOiBmYWxzZSwKICAgICAgc3RhdHVzTGlzdDogW1N0YXR1cy5PUEVOLCBTdGF0dXMuRklOSVNIRURdCiAgICB9OwogIH0sCgogIGFzeW5jIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnRhc2tzID0gYXdhaXQgdGhpcy5nZXRUYXNrcygpOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIGVkaXQodGFza0lkKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAiZm9ybSIsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICB0YXNrSWQKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBhc3luYyByZW1vdmUodGFza0lkKSB7CiAgICAgIHRoaXMudGFza1NlbGVjdGVkID0gYXdhaXQgVGFza3NNb2RlbC5maW5kKHRhc2tJZCk7CiAgICAgIHRoaXMuJHJlZnMubW9kYWxSZW1vdmUuc2hvdygpOwogICAgfSwKCiAgICBoaWRlTW9kYWwoKSB7CiAgICAgIHRoaXMuJHJlZnMubW9kYWxSZW1vdmUuaGlkZSgpOwogICAgfSwKCiAgICBhc3luYyBjb25maXJtUmVtb3ZlVGFzaygpIHsKICAgICAgdGhpcy50YXNrU2VsZWN0ZWQuZGVsZXRlKCk7CiAgICAgIHRoaXMudGFza3MgPSBhd2FpdCB0aGlzLmdldFRhc2tzKCk7CiAgICAgIHRoaXMuaGlkZU1vZGFsKCk7CiAgICB9LAoKICAgIGFzeW5jIHVwZGF0ZVN0YXR1cyh0YXNrSWQsIHN0YXR1cykgewogICAgICBsZXQgdGFzayA9IGF3YWl0IFRhc2tzTW9kZWwuZmluZCh0YXNrSWQpOwogICAgICB0YXNrLnN0YXR1cyA9IHN0YXR1czsKICAgICAgYXdhaXQgdGFzay5zYXZlKCk7CiAgICAgIHRoaXMudGFza3MgPSBhd2FpdCB0aGlzLmdldFRhc2tzKCk7CiAgICAgIHRoaXMuc2hvd1RvYXN0KCJ1c3BqZWgiLCAiU3RhdHVzIHphZGF0a2EgamUgdXNwamXFoW5vIGHFvnVyaXJhbiIpOwogICAgfSwKCiAgICBpc0ZpbmlzaGVkKHRhc2spIHsKICAgICAgcmV0dXJuIHRhc2suc3RhdHVzID09PSB0aGlzLnN0YXR1cy5GSU5JU0hFRDsKICAgIH0sCgogICAgYXN5bmMgZmlsdGVyVGFza3MoKSB7CiAgICAgIGxldCBmaWx0ZXIgPSB7IC4uLnRoaXMuZmlsdGVyCiAgICAgIH07CiAgICAgIGZpbHRlciA9IHRoaXMuY2xlYW4oZmlsdGVyKTsKICAgICAgZmlsdGVyLnVzZXJJZCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImF1dGhVc2VyIikpLmlkOwogICAgICB0aGlzLnRhc2tzID0gYXdhaXQgVGFza3NNb2RlbC5wYXJhbXMoZmlsdGVyKS5nZXQoKTsKICAgIH0sCgogICAgY2xlYW4ob2JqKSB7CiAgICAgIGZvciAodmFyIHByb3BOYW1lIGluIG9iaikgewogICAgICAgIGlmIChvYmpbcHJvcE5hbWVdID09PSBudWxsIHx8IG9ialtwcm9wTmFtZV0gPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgZGVsZXRlIG9ialtwcm9wTmFtZV07CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gb2JqOwogICAgfSwKCiAgICBhc3luYyBjbGVhckZpbHRlcigpIHsKICAgICAgdGhpcy5maWx0ZXIgPSB7CiAgICAgICAgc3ViamVjdDogbnVsbCwKICAgICAgICBzdGF0dXM6IG51bGwKICAgICAgfTsKICAgICAgdGhpcy50YXNrcyA9IGF3YWl0IHRoaXMuZ2V0VGFza3MoKTsKICAgIH0sCgogICAgb3ZlcmR1ZVByZXNlbnRlcihkYXRlT3ZlcmR1ZSkgewogICAgICBpZiAoIWRhdGVPdmVyZHVlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICByZXR1cm4gZGF0ZU92ZXJkdWUuc3BsaXQoIi0iKS5yZXZlcnNlKCkuam9pbigiLyIpOwogICAgfSwKCiAgICB2YXJpYW50T3ZlcmR1ZShkYXRlT3ZlcmR1ZSwgdGFza1N0YXR1cykgewogICAgICBpZiAoIWRhdGVPdmVyZHVlKSB7CiAgICAgICAgcmV0dXJuICJsaWdodCI7CiAgICAgIH0KCiAgICAgIGlmICh0YXNrU3RhdHVzID09PSB0aGlzLnN0YXR1cy5GSU5JU0hFRCkgewogICAgICAgIHJldHVybiAic3VjY2VzcyI7CiAgICAgIH0KCiAgICAgIGxldCBkYXRlTm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCJUIilbMF07CgogICAgICBpZiAoZGF0ZU92ZXJkdWUgPT09IGRhdGVOb3cpIHsKICAgICAgICByZXR1cm4gIndhcm5pbmciOwogICAgICB9CgogICAgICBpZiAoZGF0ZU92ZXJkdWUgPCBkYXRlTm93KSB7CiAgICAgICAgcmV0dXJuICJkYW5nZXIiOwogICAgICB9CgogICAgICByZXR1cm4gImxpZ2h0IjsKICAgIH0sCgogICAgYXN5bmMgZ2V0VGFza3MoKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgbGV0IHNlbGYgPSB0aGlzOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBzZWxmLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICB9LCAzMDAwKTsKICAgICAgcmV0dXJuIGF3YWl0IFRhc2tzTW9kZWwucGFyYW1zKHsKICAgICAgICB1c2VySWQ6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImF1dGhVc2VyIikpLmlkLAogICAgICAgIHN0YXR1czogdGhpcy5zdGF0dXNMaXN0CiAgICAgIH0pLmdldCgpOwogICAgfQoKICB9LAogIGNvbXB1dGVkOiB7CiAgICBpc1Rhc2tzRW1wdHkoKSB7CiAgICAgIHJldHVybiB0aGlzLnRhc2tzLmxlbmd0aCA9PT0gMDsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"mappings":"AA8HA;AACA;AACA;AAEA;EACAA,YADA;EAGAC,oBAHA;;EAKAC;IACA;MACAC,SADA;MAEAC,gBAFA;MAGAC,cAHA;MAIAC;QACAC,aADA;QAEAF;MAFA,CAJA;MAQAG,cACA;QAAAC;QAAAC;MAAA,CADA,EAEA;QAAAD;QAAAC;MAAA,CAFA,EAGA;QAAAD;QAAAC;MAAA,CAHA,EAIA;QAAAD;QAAAC;MAAA,CAJA,CARA;MAcAC,gBAdA;MAeAC;IAfA;EAiBA,CAvBA;;EAyBA;IACA;EACA,CA3BA;;EA6BAC;IACAC;MACA;QAAAd;QAAAe;UAAAC;QAAA;MAAA;IACA,CAHA;;IAKA;MACA;MACA;IACA,CARA;;IAUAC;MACA;IACA,CAZA;;IAcA;MACA;MACA;MACA;IACA,CAlBA;;IAoBA;MACA;MACAC;MACA;MAEA;MACA,eACA,QADA,EAEA,qCAFA;IAIA,CA9BA;;IAgCAC;MACA;IACA,CAlCA;;IAoCA;MACA;MAAA;MACAb;MACAA;MACA;IACA,CAzCA;;IA2CAc;MACA;QACA;UACA;QACA;MACA;;MACA;IACA,CAlDA;;IAoDA;MACA;QACAb,aADA;QAEAF;MAFA;MAIA;IACA,CA1DA;;IA4DAgB;MACA;QACA;MACA;;MACA;IACA,CAjEA;;IAmEAC;MACA;QACA;MACA;;MAEA;QACA;MACA;;MAEA;;MACA;QACA;MACA;;MAEA;QACA;MACA;;MAEA;IACA,CAtFA;;IAwFA;MACA;MACA;MACAC;QACAC;MACA,CAFA,EAEA,IAFA;MAGA;QACAC,uDADA;QAEApB;MAFA,GAGAqB,GAHA;IAIA;;EAlGA,CA7BA;EAkIAC;IACAC;MACA;IACA;;EAHA;AAlIA","names":["name","mixins","data","tasks","taskSelected","status","filter","subject","optionsList","value","text","isLoading","statusList","methods","edit","params","taskId","hideModal","task","isFinished","clean","overduePresenter","variantOverdue","setTimeout","self","userId","get","computed","isTasksEmpty"],"sourceRoot":"src/views","sources":["List.vue"],"sourcesContent":["<template>\n  <div class=\"container mt-2\">\n    <b-form inline class=\"mb-2\">\n      <b-form-input\n        v-model=\"filter.subject\"\n        id=\"subject\"\n        placeholder=\"upiši obvezu\"\n        class=\"mr-2\"\n        autocomplete=\"off\"\n      ></b-form-input>\n\n      <b-form-select\n        v-model=\"filter.status\"\n        :options=\"optionsList\"\n        class=\"mr-2\"\n      ></b-form-select>\n\n      <b-button\n        variant=\"outline-secondary\"\n        @click=\"filterTasks\"\n        class=\"mr-2\"\n        v-b-tooltip.hover\n        title=\"Traži\"\n        ><i class=\"fas fa-search\"></i\n      ></b-button>\n\n      <b-button\n        variant=\"outline-secondary\"\n        @click=\"clearFilter\"\n        class=\"mr-2\"\n        v-b-tooltip.hover\n        title=\"očisti filter\"\n        ><i class=\"fas fa-times\"></i\n      ></b-button>\n    </b-form>\n\n    <template v-if=\"isLoading\">\n      <div class=\"loading-spin\">\n        <b-spinner style=\"width: 5rem; height: 5rem\"></b-spinner>\n      </div>\n    </template>\n    <template v-if=\"isTasksEmpty && !isLoading\">\n      <div class=\"empty-data mt-2\">\n        <img src=\"../assets/images/empty-data.svg\" class=\"empty-data-image\" />\n        <b-button variant=\"outline-primary\" class=\"mt-2\" size=\"lg\" to=\"/form\">\n          stvori zadatak\n        </b-button>\n      </div>\n    </template>\n    <template v-if=\"!isTasksEmpty && !isLoading\">\n      <div v-for=\"task in tasks\" :key=\"task.id\">\n        <b-card class=\"mb-2\" :class=\"{ 'finished-task': isFinished(task) }\">\n          <div class=\"d-flex justify-content-between\">\n            <b-card-title>{{ task.subject }}</b-card-title>\n\n            <span>\n              <b-badge\n                :variant=\"variantOverdue(task.dateOverdue, task.status)\"\n                >{{ overduePresenter(task.dateOverdue) }}</b-badge\n              >\n            </span>\n          </div>\n\n          <b-card-text>{{ task.description }}</b-card-text>\n\n          <b-button\n            variant=\"outline-secondary\"\n            class=\"mr-2\"\n            @click=\"updateStatus(task.id, status.FINISHED)\"\n            v-b-tooltip.hover\n            title=\"završi\"\n          >\n            <i class=\"fas fa-check\"></i>\n          </b-button>\n          <b-button\n            variant=\"outline-secondary\"\n            class=\"mr-2\"\n            @click=\"updateStatus(task.id, status.ARCHIVED)\"\n            v-b-tooltip.hover\n            title=\"arhiviraj\"\n          >\n            <i class=\"fas fa-archive\"></i>\n          </b-button>\n          <b-button\n            variant=\"outline-secondary\"\n            class=\"mr-2\"\n            @click=\"edit(task.id)\"\n            v-b-tooltip.hover\n            title=\"uredi\"\n          >\n            <i class=\"fas fa-edit\"></i>\n          </b-button>\n          <b-button\n            variant=\"outline-danger\"\n            class=\"mr-2\"\n            @click=\"remove(task.id)\"\n            v-b-tooltip.hover\n            title=\"izbriši\"\n          >\n            <i class=\"fas fa-times\"></i>\n          </b-button>\n        </b-card>\n      </div>\n    </template>\n\n    <b-modal ref=\"modalRemove\" hide-footer title=\"brisanje zadataka\">\n      <div class=\"d-block text-center\">\n        želite izbrisati zadatak? {{ taskSelected.subject }}\n      </div>\n      <div class=\"mt-3 d-flex justify-content-end\">\n        <b-button variant=\"outline-secondary\" class=\"mr-2\" @click=\"hideModal\">\n          odustani\n        </b-button>\n        <b-button\n          variant=\"outline-danger\"\n          class=\"mr-2\"\n          @click=\"confirmRemoveTask\"\n        >\n          IZBRIŠI\n        </b-button>\n      </div>\n    </b-modal>\n  </div>\n</template>\n\n<script>\nimport TasksModel from \"@/models/TasksModel\";\nimport Status from \"@/valueObjects/status\";\nimport ToastMixin from \"@/mixins/toastMixin.js\";\n\nexport default {\n  name: \"List\",\n\n  mixins: [ToastMixin],\n\n  data() {\n    return {\n      tasks: [],\n      taskSelected: [],\n      status: Status,\n      filter: {\n        subject: null,\n        status: null,\n      },\n      optionsList: [\n        { value: null, text: \"sve\" },\n        { value: Status.OPEN, text: \"u radu\" },\n        { value: Status.FINISHED, text: \"završeno\" },\n        { value: Status.ARCHIVED, text: \"arhivirano\" },\n      ],\n      isLoading: false,\n      statusList: [Status.OPEN, Status.FINISHED],\n    };\n  },\n\n  async created() {\n    this.tasks = await this.getTasks();\n  },\n\n  methods: {\n    edit(taskId) {\n      this.$router.push({ name: \"form\", params: { taskId } });\n    },\n\n    async remove(taskId) {\n      this.taskSelected = await TasksModel.find(taskId);\n      this.$refs.modalRemove.show();\n    },\n\n    hideModal() {\n      this.$refs.modalRemove.hide();\n    },\n\n    async confirmRemoveTask() {\n      this.taskSelected.delete();\n      this.tasks = await this.getTasks();\n      this.hideModal();\n    },\n\n    async updateStatus(taskId, status) {\n      let task = await TasksModel.find(taskId);\n      task.status = status;\n      await task.save();\n\n      this.tasks = await this.getTasks();\n      this.showToast(\n        \"uspjeh\",\n         \"Status zadatka je uspješno ažuriran\"\n      );\n    },\n\n    isFinished(task) {\n      return task.status === this.status.FINISHED;\n    },\n\n    async filterTasks() {\n      let filter = { ...this.filter };\n      filter = this.clean(filter);\n      filter.userId = JSON.parse(localStorage.getItem(\"authUser\")).id;\n      this.tasks = await TasksModel.params(filter).get();\n    },\n\n    clean(obj) {\n      for (var propName in obj) {\n        if (obj[propName] === null || obj[propName] === undefined) {\n          delete obj[propName];\n        }\n      }\n      return obj;\n    },\n\n    async clearFilter() {\n      this.filter = {\n        subject: null,\n        status: null,\n      };\n      this.tasks = await this.getTasks();\n    },\n\n    overduePresenter(dateOverdue) {\n      if (!dateOverdue) {\n        return;\n      }\n      return dateOverdue.split(\"-\").reverse().join(\"/\");\n    },\n\n    variantOverdue(dateOverdue, taskStatus) {\n      if (!dateOverdue) {\n        return \"light\";\n      }\n\n      if (taskStatus === this.status.FINISHED) {\n        return \"success\";\n      }\n\n      let dateNow = new Date().toISOString().split(\"T\")[0];\n      if (dateOverdue === dateNow) {\n        return \"warning\";\n      }\n\n      if (dateOverdue < dateNow) {\n        return \"danger\";\n      }\n\n      return \"light\";\n    },\n\n    async getTasks() {\n      this.isLoading = true;\n      let self = this;\n      setTimeout(function () {\n        self.isLoading = false;\n      }, 3000);\n      return await TasksModel.params({\n        userId: JSON.parse(localStorage.getItem(\"authUser\")).id,\n        status: this.statusList,\n      }).get();\n    },\n  },\n\n  computed: {\n    isTasksEmpty() {\n      return this.tasks.length === 0;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.empty-data {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n}\n\n.empty-data-image {\n  width: 300px;\n  height: 300px;\n}\n\n.finished-task {\n  opacity: 0.7;\n}\n\n.finished-task > .card-body > h4,\n.finished-task > .card-body > p {\n  text-decoration: line-through;\n}\n\n.loading-spin {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 65vh;\n}\n</style>\n"]}]}